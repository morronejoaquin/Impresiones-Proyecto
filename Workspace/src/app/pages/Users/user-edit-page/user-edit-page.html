<div class="edit-container">
  <h2>Editar Perfil</h2>
  <div *ngIf="currentUser" class="card">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="card-body">
        <div class="form-group">
          <label for="name">Nombre:</label>
          <input id="name" type="text" formControlName="name" class="form-control">
          @if (userForm.get('name')?.touched && userForm.get('name')?.hasError('required')) {
            <small class="error-message">El nombre es obligatorio</small>
          }
        </div>

        <div class="form-group">
          <label for="surname">Apellido:</label>
          <input id="surname" type="text" formControlName="surname" class="form-control">
          @if (userForm.get('surname')?.touched && userForm.get('surname')?.hasError('required')) {
            <small class="error-message">El apellido es obligatorio</small>
          }
        </div>

        <div class="form-group">
          <label for="email">Email:</label>
          <input id="email" type="email" formControlName="email" class="form-control">
          @if (userForm.get('email')?.touched && userForm.get('email')?.hasError('required')) {
            <small class="error-message">El correo electrónico es obligatorio</small>
          }
          @else if (userForm.get('email')?.touched && userForm.get('email')?.hasError('email')) {
            <small class="error-message">El correo electrónico no es válido</small>
          }
        </div>

        <div class="form-group">
          <label for="phone">Teléfono:</label>
          <input id="phone" type="text" formControlName="phone" class="form-control">
          @if (userForm.get('phone')?.touched && userForm.get('phone')?.hasError('required')) {
            <small class="error-message">El teléfono es obligatorio</small>
          }
        </div>

        <div class="form-group">
          <label for="password">Nueva Contraseña (opcional):</label>
          <input id="password" type="password" formControlName="password" class="form-control" placeholder="Dejar en blanco para no cambiar">
          @if (userForm.get('password')?.touched && userForm.get('password')?.hasError('pattern')) {
            <small class="error-message">La contraseña debe tener mayúsculas, minúsculas, número y símbolo.</small>
          }
          @else if (userForm.get('password')?.touched && userForm.get('password')?.hasError('minlength')) {
            <small class="error-message">Debe tener al menos 6 caracteres</small>
          }
        </div>
      </div>

      <div class="card-footer">
        <button type="button" class="btn-secondary" (click)="onCancel()">Cancelar</button>
        <button type="submit" class="btn-primary" [disabled]="!userForm.valid">Guardar Cambios</button>
      </div>
    </form>
  </div>

  <ng-template #loading>
    <p>Cargando datos del usuario...</p>
  </ng-template>
</div>
